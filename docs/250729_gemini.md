# PRD 분석 및 구현 상태 검토 (2025-07-29)

## 요약

현재 프로젝트는 `PRD.md`에 명시된 핵심 기능인 임의의 NAND 작업 순차열 생성 기능을 구현하고 있습니다. 설정 파일을 통해 작업 확률을 제어하는 기능 또한 구현되어 있습니다.

하지만, 실제 NAND의 동작을 더 정확하게 시뮬레이션하기 위한 몇 가지 중요한 요구사항들이 누락되어 있으며, 이는 향후 구현에서 보완될 필요가 있습니다.

## 주요 구현 누락 및 개선 사항

### 1. NAND 지오메트리(Geometry)를 고려한 주소(Address) 생성

*   **PRD 요구사항**: PRD는 "실제 NAND 플래시 메모리와 유사한 주소 패턴"을 생성해야 한다고 명시하고 있습니다. 이는 Erase 작업은 Block 단위로, Read/Write 작업은 Page 단위로 주소가 정렬되어야 함을 의미합니다.
*   **현재 상태**: `gen_seq.py`의 `generate_sequence` 함수는 단순히 임의의 작업 목록을 생성할 뿐, 각 작업에 대한 주소를 생성하거나 NAND 모델의 구조(예: 페이지 크기, 블록당 페이지 수)를 고려하지 않습니다.
*   **개선 제안**:
    1.  `config.yaml`에 선택된 `nand_model`에 따른 상세 지오메트리 정보(예: `pages_per_block`, `blocks_per_die` 등)를 추가합니다.
    2.  `gen_seq.py`에서 이 지오메트리 정보를 읽어와, 각 작업(Erase, Write, Read)에 맞는 유효한 주소를 생성하도록 로직을 수정해야 합니다.

### 2. 다양한 출력 형식(Output Format) 지원

*   **PRD 요구사항**: PRD는 생성된 순차열을 `JSON` 또는 `CSV` 형식으로 출력하는 기능을 요구하고 있습니다. `config.yaml`에도 `output_format` 필드가 존재합니다.
*   **현재 상태**: `main.py`는 순차열을 생성하여 화면에 출력하거나 파일에 저장하는 기능은 있으나, `config.yaml`의 `output_format` 설정을 읽어와 그에 맞게 출력 형식을 동적으로 변경하는 로직은 구현되어 있지 않습니다. 현재는 파이썬 리스트의 기본 출력 형태를 그대로 사용하고 있습니다.
*   **개선 제안**:
    1.  `main.py`에서 `config.yaml`의 `output_format` 값을 확인합니다.
    2.  값에 따라 `json` 라이브러리 또는 `csv` 라이브러리를 사용하여 지정된 형식으로 데이터를 변환한 후 출력/저장하도록 기능을 추가해야 합니다.

## 아키텍처 및 패키지 검토

*   **현재 아키텍처**:
    *   `main.py`: 프로그램의 진입점(entrypoint) 및 CLI 인자 처리, 파일 입출력 담당
    *   `gen_seq.py`: 순차열 생성 로직 담당
    *   `config.yaml`: 설정 값 관리
    *   위와 같이 역할에 따라 파일이 잘 분리되어 있어 구조가 좋습니다. 향후 기능을 확장하기에 용이합니다.

*   **사용된 패키지**:
    *   `PyYAML`: `config.yaml` 파일을 파싱하기 위해 `pyproject.toml`에 명시되어 있으며, 이는 PRD의 설정 기능 요구사항을 만족시키는 적절한 선택입니다.

*   **추가 고려사항**:
    *   누락된 출력 형식 기능을 구현하기 위해 파이썬 표준 라이브러리인 `json`과 `csv`를 `main.py`에서 활용하면 됩니다. 별도의 외부 패키지 설치는 필요하지 않습니다.
